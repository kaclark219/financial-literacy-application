<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Categories</title>
    <link rel="stylesheet" href="categories_style.css">
</head> 
<body>
    <div class="header">
        <h1>Categories</h1>
    </div>

    <div class="categories-container">
        <div class="category-card" style="--color: #1F77B4">
            <svg class="category-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
            <path d="M62.79,29.172l-28-28C34.009,0.391,32.985,0,31.962,0s-2.047,0.391-2.828,1.172l-28,28
                c-1.562,1.566-1.484,4.016,0.078,5.578c1.566,1.57,3.855,1.801,5.422,0.234L8,33.617V60c0,2.211,1.789,4,4,4h16V48h8v16h16
                c2.211,0,4-1.789,4-4V33.695l1.195,1.195c1.562,1.562,3.949,1.422,5.516-0.141C64.274,33.188,64.356,30.734,62.79,29.172z"/>
            </svg> 
            <p class="category-name">Rent</p> 
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>
        <div class="category-card" style="--color: #FF7F0E">
            <svg class="category-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 19.5C10.0523 19.5 10.5 19.0523 10.5 18.5C10.5 17.9477 10.0523 17.5 9.5 17.5C8.94772 17.5 8.5 17.9477 8.5 18.5C8.5 19.0523 8.94772 19.5 9.5 19.5ZM9.5 20.5C10.6046 20.5 11.5 19.6046 11.5 18.5C11.5 17.3954 10.6046 16.5 9.5 16.5C8.39543 16.5 7.5 17.3954 7.5 18.5C7.5 19.6046 8.39543 20.5 9.5 20.5Z"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 19.5C17.0523 19.5 17.5 19.0523 17.5 18.5C17.5 17.9477 17.0523 17.5 16.5 17.5C15.9477 17.5 15.5 17.9477 15.5 18.5C15.5 19.0523 15.9477 19.5 16.5 19.5ZM16.5 20.5C17.6046 20.5 18.5 19.6046 18.5 18.5C18.5 17.3954 17.6046 16.5 16.5 16.5C15.3954 16.5 14.5 17.3954 14.5 18.5C14.5 19.6046 15.3954 20.5 16.5 20.5Z"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M3 4C3 3.72386 3.22386 3.5 3.5 3.5H5.5C5.71767 3.5 5.91033 3.64082 5.97641 3.84822L9.36993 14.5H17C17.2761 14.5 17.5 14.7239 17.5 15C17.5 15.2761 17.2761 15.5 17 15.5H9.00446C8.78679 15.5 8.59413 15.3592 8.52805 15.1518L5.13453 4.5H3.5C3.22386 4.5 3 4.27614 3 4Z"/>
                <path d="M8.5 13L6 6H19.3371C19.6693 6 19.9092 6.31795 19.8179 6.63736L18.1036 12.6374C18.0423 12.852 17.8461 13 17.6228 13H8.5Z"/>
            </svg>
            <p class="category-name">Groceries</p> 
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>  
        <div class="category-card" style="--color: #2CA02C">
            <svg class="category-icon" viewBox="0 0 24 24" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path d="M12,3C9.6,3,7.5,4.5,6.5,6.9c-0.7,1.8-0.7,3.9,0.1,5.7l1.6,3.6v2c0,1,0.8,1.8,1.8,1.8h0c0,0.6,0.4,1,1,1h1.8    c0.6,0,1-0.4,1-1h0c1,0,1.8-0.8,1.8-1.8v-2l1.6-3.6c0.8-1.8,0.8-3.9,0.1-5.7C16.5,4.5,14.4,3,12,3z M13.8,18h-3.5v-1h3.5V18z     M15.6,11.8L14.1,15H13v-1.3c0.5-0.1,0.8-0.5,0.8-1c0-0.6-0.4-1-1-1h-1.7c-0.6,0-1,0.4-1,1c0,0.5,0.4,0.9,0.8,1V15H9.9l-1.4-3.2    C7.9,10.5,7.9,9,8.4,7.7C9.1,6,10.4,5,12,5s2.9,1,3.6,2.7C16.1,9,16.1,10.5,15.6,11.8z"/>
                <path d="M3.7,4.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l1,1C3.5,6.9,3.7,7,4,7s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L3.7,4.3z"/>
                <path d="M3,10c0.6,0,1-0.4,1-1S3.6,8,3,8H2C1.4,8,1,8.4,1,9s0.4,1,1,1H3z"/>
                <path d="M3.3,11.3l-1,1c-0.4,0.4-0.4,1,0,1.4C2.5,13.9,2.7,14,3,14s0.5-0.1,0.7-0.3l1-1c0.4-0.4,0.4-1,0-1.4S3.7,10.9,3.3,11.3z"/>
                <path d="M20.7,11.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l1,1c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4    L20.7,11.3z"/>
                <path d="M22,8h-1c-0.6,0-1,0.4-1,1s0.4,1,1,1h1c0.6,0,1-0.4,1-1S22.6,8,22,8z"/>
                <path d="M20,7c0.3,0,0.5-0.1,0.7-0.3l1-1c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-1,1c-0.4,0.4-0.4,1,0,1.4C19.5,6.9,19.7,7,20,7z"/>
                </svg>
            <p class="category-name">Utilities</p>
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>
        <div class="category-card" style="--color: #D62728">
            <svg class="category-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M16,6l3,4h2c1.11,0,2,0.89,2,2v3h-2c0,1.66-1.34,3-3,3s-3-1.34-3-3H9c0,1.66-1.34,3-3,3s-3-1.34-3-3H1v-3c0-1.11,0.89-2,2-2
                    l3-4H16 M10.5,7.5H6.75L4.86,10h5.64V7.5 M12,7.5V10h5.14l-1.89-2.5H12 M6,13.5c-0.83,0-1.5,0.67-1.5,1.5s0.67,1.5,1.5,1.5
                    s1.5-0.67,1.5-1.5S6.83,13.5,6,13.5 M18,13.5c-0.83,0-1.5,0.67-1.5,1.5s0.67,1.5,1.5,1.5s1.5-0.67,1.5-1.5S18.83,13.5,18,13.5z"/>
                <rect fill="none" width="24" height="24"/>
            </svg>
            <p class="category-name">Gas</p>
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>
        <div class="category-card" style="--color: #9467BD">
            <svg class="category-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M16.5285 6C16.5098 5.9193 16.4904 5.83842 16.4701 5.75746C16.2061 4.70138 15.7904 3.55383 15.1125 2.65C14.4135 1.71802 13.3929 1 12 1C10.6071 1 9.58648 1.71802 8.88749 2.65C8.20962 3.55383 7.79387 4.70138 7.52985 5.75747C7.50961 5.83842 7.49016 5.9193 7.47145 6H5.8711C4.29171 6 2.98281 7.22455 2.87775 8.80044L2.14441 19.8004C2.02898 21.532 3.40238 23 5.13777 23H18.8622C20.5976 23 21.971 21.532 21.8556 19.8004L21.1222 8.80044C21.0172 7.22455 19.7083 6 18.1289 6H16.5285ZM8 11C8.57298 11 8.99806 10.5684 9.00001 9.99817C9.00016 9.97438 9.00044 9.9506 9.00084 9.92682C9.00172 9.87413 9.00351 9.79455 9.00718 9.69194C9.01451 9.48652 9.0293 9.18999 9.05905 8.83304C9.08015 8.57976 9.10858 8.29862 9.14674 8H14.8533C14.8914 8.29862 14.9198 8.57976 14.941 8.83305C14.9707 9.18999 14.9855 9.48652 14.9928 9.69194C14.9965 9.79455 14.9983 9.87413 14.9992 9.92682C14.9996 9.95134 14.9999 9.97587 15 10.0004C15 10.0004 15 11 16 11C17 11 17 9.99866 17 9.99866C16.9999 9.9636 16.9995 9.92854 16.9989 9.89349C16.9978 9.829 16.9957 9.7367 16.9915 9.62056C16.9833 9.38848 16.9668 9.06001 16.934 8.66695C16.917 8.46202 16.8953 8.23812 16.8679 8H18.1289C18.6554 8 19.0917 8.40818 19.1267 8.93348L19.86 19.9335C19.8985 20.5107 19.4407 21 18.8622 21H5.13777C4.55931 21 4.10151 20.5107 4.13998 19.9335L4.87332 8.93348C4.90834 8.40818 5.34464 8 5.8711 8H7.13208C7.10465 8.23812 7.08303 8.46202 7.06595 8.66696C7.0332 9.06001 7.01674 9.38848 7.00845 9.62056C7.0043 9.7367 7.00219 9.829 7.00112 9.89349C7.00054 9.92785 7.00011 9.96221 7 9.99658C6.99924 10.5672 7.42833 11 8 11ZM9.53352 6H14.4665C14.2353 5.15322 13.921 4.39466 13.5125 3.85C13.0865 3.28198 12.6071 3 12 3C11.3929 3 10.9135 3.28198 10.4875 3.85C10.079 4.39466 9.76472 5.15322 9.53352 6Z"/>
                </svg> 
            <p class="category-name">Shopping</p>
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>
        <div class="category-card" id="EatingOut" style="--color: #F975F4; display:none">
            <svg class="category-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M9.7,22a8,8,0,0,0,8.037-6H19a3.005,3.005,0,0,0,2.942-3.6,3.081,3.081,0,0,0-3.06-2.4H3a1,1,0,0,0-1,1v2.7A8.2,8.2,0,0,0,9.7,22ZM18,12h1a1,1,0,0,1,0,2H18ZM6.707,3.707l-.75.75A2.42,2.42,0,0,1,6.561,6a2.049,2.049,0,0,1-.6,1.457l-1.25,1.25A1,1,0,0,1,3.293,7.293l1.25-1.25a2.42,2.42,0,0,1-.6-1.543,2.049,2.049,0,0,1,.6-1.457l.75-.75A1,1,0,0,1,6.707,3.707Zm5,0-.75.75A2.42,2.42,0,0,1,11.561,6a2.049,2.049,0,0,1-.6,1.457l-1.25,1.25A1,1,0,0,1,8.293,7.293l1.25-1.25a2.42,2.42,0,0,1-.6-1.543,2.049,2.049,0,0,1,.6-1.457l.75-.75a1,1,0,1,1,1.414,1.414Zm5,0-.75.75A2.42,2.42,0,0,1,16.561,6a2.049,2.049,0,0,1-.6,1.457l-1.25,1.25a1,1,0,0,1-1.414-1.414l1.25-1.25a2.42,2.42,0,0,1-.6-1.543,2.049,2.049,0,0,1,.6-1.457l.75-.75a1,1,0,1,1,1.414,1.414Z"></path></g></svg>
            <p class="category-name">Eating Out</p>
            <button class="category-button">Add Expense</button>
            <button class="change-color-btn">Change Color</button>
        </div>
    </div>

    <!-- Add Expense Modal -->
    <div id="addExpenseModal" class="modal">
        <div class="modal-content">
        <button id="closeExpenseModal"><img src="assets/close.webp"></button>
          <h2>Add Expense</h2>
          <br>
          <form id="expenseForm">
            <!-- Amount Input Row -->
            <div class="form-row">
              <label for="expenseAmount">Amount: $</label>
              <input type="number" id="expenseAmount" name="expenseAmount" placeholder="Enter $$ amount" required>
            </div>
      
            <!-- Memo Input Row -->
            <div class="form-row">
              <label for="expenseMemo">Memo:</label>
              <input type="text" id="expenseMemo" name="expenseMemo" placeholder="Enter memo" required>
            </div>
      
            <!-- Submit Button -->
            <button type="submit">Add Expense</button>
          </form>
        </div>
    </div>
    <script>
        // Get the modal and buttons
        const expenseModal = document.getElementById('addExpenseModal');
        const addExpenseBtns = document.querySelectorAll('.category-button');
        const closeExpenseModalBtn = document.getElementById('closeExpenseModal');

        // Open the modal when any "Add Expense" button is clicked
        addExpenseBtns.forEach(button => {
        button.addEventListener('click', () => {
            expenseModal.style.display = 'block';
        });
        });

        // Close the modal when the close button (X) is clicked
        closeExpenseModalBtn.onclick = function() {
        expenseModal.style.display = 'none';
        }

        // Close the modal if the user clicks outside it
        window.onclick = function(event) {
        if (event.target === expenseModal) {
            expenseModal.style.display = 'none';
        }
        }
    </script>

    <br>
    <br>

    <div class="new-category">
        <button id="addCategoryBtn"><img src="assets/new_category.png" alt="list with plus sign">Add New Spending Category</button>
    </div> 
    <div id="addCategoryModal" class="modal">
        <div class="modal-content">
          <button id="closeAddCategoryModal"><img src="assets/close.webp"></button>
          <h3>New Category</h3> <br>
          <button id="createCategory">Add Custom Category</button>
          <br><br>
          <p>Or choose from a category below: </p>
          <br>
          <button id="addEatingOut"><img src="assets/addgoal.png">Eating Out</button>
          <button id="addTransportation"><img src="assets/addgoal.png">Public Transportation</button>
          <button id="addSelfCare"><img src="assets/addgoal.png">Hygiene/Self-Care</button>
        </div>
    </div>
    <div id="addCustomCategoryModal" class="modal">
        <div class="modal-content">
          <button id="closeCustomCategoryModal"><img src="assets/close.webp"></button>
          <h3>New Custom Category</h3> <br>
          <form id="categoryForm">
            <label for="categoryName">Name:</label>
            <input type="text" id="categoryName" name="categoryName" placeholder="Enter category name" required>
            <br>
            <label for="categoryColor">Color:</label>
            <input type="color" id="categoryColor" name="categoryColor" value="#ff0000">
            <br>
            <label for="categoryIcon">Icon:</label>
            <select id="categoryIcon" name="categoryIcon">
              <option value="icon1.svg">Train</option>
              <option value="icon2.svg">Money</option>
              <option value="icon3.svg">Pills</option>
            </select>
            <br>
            <!-- Submit Button -->
            <button type="submit">Create Category</button>
          </form>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          const addCategoryBtn = document.getElementById('addCategoryBtn');
          const addCategoryModal = document.getElementById('addCategoryModal');
          const closeAddCategoryModalBtn = document.getElementById('closeAddCategoryModal');

          const addCustomCategoryBtn = document.getElementById('createCategory');
          const addCustomCategoryModal = document.getElementById('addCustomCategoryModal');
          const closeCustomCategoryModalBtn = document.getElementById('closeCustomCategoryModal');

          const addEatingOutBtn = document.getElementById("addEatingOut");
          const eatingOutCategory = document.getElementById('EatingOut');
      
          // Open the "Add New Category" modal
          addCategoryBtn.addEventListener('click', () => {
            addCategoryModal.style.display = 'block'; // Show the modal
          });

          addCustomCategoryBtn.addEventListener('click', () => {
            addCustomCategoryModal.style.display = 'block';
            addCategoryModal.style.display = 'none';
          })

          //Add the eating out category
          addEatingOutBtn.addEventListener('click', () => {
            eatingOutCategory.style.display= 'block';
          })
      
          // Close the "Add New Category" modal
          closeAddCategoryModalBtn.addEventListener('click', () => {
            addCategoryModal.style.display = 'none'; // Hide the modal
          });

          closeCustomCategoryModalBtn.addEventListener('click', () => {
            addCustomCategoryModal.style.display = 'none'; // Hide the modal
          });
      
          // Close modal when clicking outside of it
          window.addEventListener('click', (e) => {
            if (e.target === addCategoryModal) {
              addCategoryModal.style.display = 'none';
            }
            if (e.target === addCustomCategoryModal) {
              addCustomCategoryModal.style.display = 'none';
            }
          });
        });
    </script>

    <div class="footer">
        <a href="overview.html">
            <img src="assets/overview.png" alt="overview icon">
            <p>Overview</p>
        </a>
        <a href="categories.html">
            <img src="assets/categories.png" alt="categories icon">
            <p>Categories</p>
        </a>
        <a href="learning_page.html">
            <img src="assets/learning.png" alt="learning icon">
            <p>Learning</p>
        </a>
        <a href="goals.html">
            <img src="assets/goals.png" alt="goals icon">
            <p>Goals</p>
        </a>
        <a href="profile.html"> 
            <img src="assets/profile.png" alt="profile icon">
            <p>My Profile</p>
        </a>
    </div>
</body>
</html>

<div id="colorPickerModal" class="modal">
    <div class="modal-content">
        <button id="closeModal"><img src="assets/close.webp"></button>
        <h3>Select a Color</h3>
        <input type="color" id="colorPicker" />
        <br>
        <button id="applyColor">Apply</button>
        
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('colorPickerModal');
            const colorPicker = document.getElementById('colorPicker');
            const applyColorBtn = document.getElementById('applyColor');
            const closeModalBtn = document.getElementById('closeModal');
            let currentCard = null;
        
            document.querySelectorAll('.change-color-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentCard = btn.closest('.category-card'); // Get the current card
                    colorPicker.value = getComputedStyle(currentCard).getPropertyValue('--color').trim(); // Pre-select current color
                    modal.style.display = 'block'; // Show modal
                });
            });
        
            closeModalBtn.addEventListener('click', () => {
                modal.style.display = 'none'; // Hide modal
            });
        
            applyColorBtn.addEventListener('click', () => {
            if (currentCard) {
                const newColor = colorPicker.value; // Get selected color
                currentCard.style.setProperty('--color', newColor); // Update the custom property
                modal.style.display = 'none'; // Hide modal
            }
            });
        
            // Close modal when clicking outside of it
            window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
            });
        });
    </script>
</div>
